<div class="movie-details-page">

  @if (isLoading) {
    <div class="skeleton-layout">

      <div class="skeleton-poster-placeholder"></div>

      <div class="skeleton-text-content">
        <div class="skeleton-line full-width"></div>
        <div class="skeleton-line half-width"></div>
        <div class="skeleton-line short-width"></div>
      </div>

      <div class="skeleton-buttons">
        <div class="skeleton-button"></div>
        <div class="skeleton-button"></div>
      </div>
    </div>
  }
  @if (movie && !isLoading) {
  <div class="backdrop-container">
    <img [src]="movie.poster_path" loading="lazy" alt="Backdrop" class="backdrop-image">
    <div class="backdrop-overlay"></div>
  </div>

  <!-- Back Button -->
  <button class="back-button" (click)="goBack()">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
    Back
  </button>

  <!-- Main Content -->
  <div class="details-container">

    <!-- Left Side - Poster -->
    <div class="poster-section">
      <img [src]="movie.poster_path" [alt]="movie.originalTitle" class="movie-poster">
    </div>

    <!-- Right Side - Details -->
    <div class="info-section">

      <!-- Title -->
      <h1 class="movie-title">{{ movie.originalTitle }}</h1>

      <!-- Meta Info -->
      <div class="meta-info">
        <div class="meta-item">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="meta-icon">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
            <line x1="16" y1="2" x2="16" y2="6"/>
            <line x1="8" y1="2" x2="8" y2="6"/>
            <line x1="3" y1="10" x2="21" y2="10"/>
          </svg>
          <span>{{ movie.releaseYear }}</span>
        </div>

        <div class="meta-item">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="meta-icon">
            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
          </svg>
          <span>{{ movie.vote_average }}/10</span>
        </div>

      </div>

      <!-- Overview -->
      <div class="overview-section">
        <h2 class="section-title">OVERVIEW</h2>
        <p class="overview-text">{{ movie.overview }}</p>
      </div>

      <!-- Cast -->
      <div class="cast-section">
        <h2 class="section-title">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="section-icon">
            <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
          </svg>
          CAST
        </h2>
        <div class="cast-grid">
          <div class="cast-member" *ngFor="let actor of movie.cast">
            <span>{{ actor}}</span>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button class="btn-primary" (click)="watchTrailer()">
          Watch Trailer
        </button>
        <button class="btn-secondary" (click)="addToFavorites(movie)">
          {{ isFavorite ? 'Remove from Favorites' : 'Add to Favorites' }}
        </button>
      </div>

    </div>
  </div>
  }
</div>
